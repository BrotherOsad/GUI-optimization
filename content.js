/*! For license information please see content.js.LICENSE.txt */
(()=>{var e,t,n,o,r={61:(e,t,n)=>{var o=n(698).default;function r(){"use strict";e.exports=r=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function h(e,t,n,o){var r=t&&t.prototype instanceof y?t:y,a=Object.create(r.prototype),s=new A(o||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var p={};function y(){}function v(){}function m(){}var b={};d(b,c,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(R([])));w&&w!==n&&a.call(w,c)&&(b=w);var x=m.prototype=y.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(r,i,s,c){var l=f(e[r],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==o(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,c)}))}c(l.arg)}var r;i(this,"_invoke",{value:function(e,o){function a(){return new t((function(t,r){n(e,o,t,r)}))}return r=r?r.then(a,a):a()}})}function I(e,t,n){var o="suspendedStart";return function(r,a){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw a;return{value:void 0,done:!0}}for(n.method=r,n.arg=a;;){var i=n.delegate;if(i){var s=S(i,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var c=f(e,t,n);if("normal"===c.type){if(o=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,o=e.iterator[n];if(void 0===o)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var r=f(o,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function R(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:V}}function V(){return{value:void 0,done:!0}}return v.prototype=m,i(x,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:v,configurable:!0}),v.displayName=d(m,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,d(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},k(T.prototype),d(T.prototype,l,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,o,r,a){void 0===a&&(a=Promise);var i=new T(h(e,n,o,r),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(x),d(x,u,"Generator"),d(x,c,(function(){return this})),d(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=R,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return i.type="throw",i.arg=e,t.next=n,o&&(t.method="next",t.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],i=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var s=a.call(r,"catchLoc"),c=a.call(r,"finallyLoc");if(s&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=e,i.arg=t,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;O(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},698:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},687:(e,t,n)=>{var o=n(61)();e.exports=o;try{regeneratorRuntime=o}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},861:(e,t,n)=>{"use strict";function o(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}n.d(t,{Z:()=>r})},942:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(142);function r(e,t,n){return(t=(0,o.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},152:(e,t,n)=>{"use strict";function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=a.call(n)).done)&&(s.push(o.value),s.length!==t);c=!0);}catch(e){l=!0,r=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,{Z:()=>r})},142:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(2);function r(e){var t=function(e,t){if("object"!==(0,o.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==(0,o.Z)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,o.Z)(t)?t:String(t)}},2:(e,t,n)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}n.d(t,{Z:()=>o})},164:(e,t,n)=>{"use strict";n.a(e,(async(e,o)=>{try{n.d(t,{$I:()=>u,e9:()=>h,x$:()=>l});var r=n(942),a=n(152),i=n(861),s=n(687),c=n(550);await p();var l=await chrome.storage.sync.get();function u(e,t){return d.apply(this,arguments)}function d(){return(d=(0,i.Z)(s.mark((function e(t,n){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l[t]=n,e.next=3,chrome.storage.sync.set((0,r.Z)({},t,n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return f.apply(this,arguments)}function f(){return(f=(0,i.Z)(s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l.userQuotaResetTime<Date.now())){e.next=5;break}return e.next=3,u("userQuotaRemainingToday",200);case 3:return e.next=5,u("userQuotaResetTime",new Date((new Date).setHours(24,0,0,0)).getTime());case 5:return e.abrupt("return",l.userQuotaRemainingToday);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return y.apply(this,arguments)}function y(){return(y=(0,i.Z)(s.mark((function e(){var t,n,o,i,l,u,d,h,f,p;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.sync.get();case 2:t=e.sent,n=0,o=Object.entries(c._);case 4:if(!(n<o.length)){e.next=12;break}if(i=(0,a.Z)(o[n],2),l=i[0],u=i[1],void 0!==t[l]){e.next=9;break}return e.next=9,chrome.storage.sync.set((0,r.Z)({},l,u));case 9:n++,e.next=4;break;case 12:d=0,h=Object.entries(t);case 13:if(!(d<h.length)){e.next=21;break}if(f=(0,a.Z)(h[d],2),p=f[0],f[1],void 0!==c._[p]){e.next=18;break}return e.next=18,chrome.storage.sync.remove(p);case 18:d++,e.next=13;break;case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}chrome.storage.onChanged.addListener(function(){var e=(0,i.Z)(s.mark((function e(t,n){var o,r,i,c,u;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("sync"===n){e.next=2;break}return e.abrupt("return");case 2:for(o=0,r=Object.entries(t);o<r.length;o++)i=(0,a.Z)(r[o],2),c=i[0],u=i[1],l[c]=u.newValue;case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),o()}catch(v){o(v)}}),1)},550:(e,t,n)=>{"use strict";n.d(t,{_:()=>o});var o={useCustomApiKeyOption:!1,customYoutubeApiKey:null,databaseSharingEnabledOption:!0,shuffleOpenInNewTabOption:!0,shuffleReUseNewTabOption:!0,shuffleIgnoreShortsOption:1,shuffleOpenAsPlaylistOption:!0,shuffleNumVideosInPlaylist:10,shuffleTabId:null,channelSettings:{},currentChannelId:null,currentChannelName:null,numShuffledVideosTotal:0,userQuotaRemainingToday:200,userQuotaResetTime:new Date((new Date).setHours(24,0,0,0)).getTime(),nextAPIKeysCheckTime:new Date((new Date).setHours(168,0,0,0)).getTime(),lastViewedChangelogVersion:"0",wasLastRickRolledInYear:"1970",previousVersion:null,reviewMessageShown:!1,donationMessageShown:!1}},439:(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{var o=n(861),r=n(687),a=n(385),i=n(164),s=n(215),c=n(524),l=e([i,c]);[i,c]=l.then?(await l)():l;var u='<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0">';u=(new DOMParser).parseFromString(u,"text/html").head.firstChild,document.head.appendChild(u);var d=document.getElementById("youtube-random-video-large-shuffle-button-video"),h=document.getElementById("youtube-random-video-large-shuffle-button-channel"),f=document.getElementById("youtube-random-video-small-shuffle-button-short");function p(e){return y.apply(this,arguments)}function y(){return(y=(0,o.Z)(r.mark((function e(t){var n,o,i,s,c,l,u,d,h,f,p,y,m,g,w,x,k,T,I,S,P,O;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(),"video"==(o=(0,a.Vb)(window.location.href))||"short"==o?(i=null==t||null===(c=t.detail)||void 0===c||null===(l=c.response)||void 0===l||null===(u=l.playerResponse)||void 0===u||null===(d=u.videoDetails)||void 0===d?void 0:d.channelId,s=null==t||null===(h=t.detail)||void 0===h||null===(f=h.response)||void 0===f||null===(p=f.playerResponse)||void 0===p||null===(y=p.videoDetails)||void 0===y?void 0:y.author):"channel"==o&&(i=null==t||null===(m=t.detail)||void 0===m||null===(g=m.response)||void 0===g||null===(w=g.response)||void 0===w||null===(x=w.header)||void 0===x||null===(k=x.c4TabbedHeaderRenderer)||void 0===k?void 0:k.channelId,s=null==t||null===(T=t.detail)||void 0===T||null===(I=T.response)||void 0===I||null===(S=I.response)||void 0===S||null===(P=S.header)||void 0===P||null===(O=P.c4TabbedHeaderRenderer)||void 0===O?void 0:O.title),null!==(n=i)&&void 0!==n&&n.startsWith("UC")){e.next=5;break}return e.abrupt("return");case 5:new MutationObserver((function(e,t){if("channel"===o)var n=document.getElementById("channel-header");else if("video"===o)var r=document.getElementById("player")&&document.getElementById("above-the-fold");else if("short"===o)var a=!0;return"video"===o&&r?(t.disconnect(),void v("video",i,s)):"short"===o&&a?(t.disconnect(),void v("short",i,s)):"channel"===o&&n?(t.disconnect(),void v("channel",i,s)):void 0})).observe(document,{childList:!0,subtree:!0});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t,n){return m.apply(this,arguments)}function m(){return(m=(0,o.Z)(r.mark((function e(t,n,o){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"video"===t&&(0,s.xV)(),e.prev=1,e.next=4,chrome.runtime.sendMessage({command:"connectionTest"});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),"Extension context invalidated."===e.t0.message&&window.location.reload();case 9:return i.x$||window.location.reload(),e.next=12,(0,i.$I)("currentChannelId",n);case 12:return e.next=14,(0,i.$I)("currentChannelName",o);case 14:return e.next=16,chrome.runtime.sendMessage({command:"updateCurrentChannel"});case 16:(0,s.MA)(t,n,g);case 17:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function b(){s.To&&(s.To.id.includes("large-shuffle-button")?s.To.innerText=" Shuffle":"autorenew"!==s.To.innerText&&((0,a.BO)(s.To,!1),s.To.innerText="shuffle"))}function g(){return w.apply(this,arguments)}function w(){return(w=(0,o.Z)(r.mark((function e(){var t,n,l,u,d,h,f,p,y,v,m,g,w;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(),t=s.To,e.prev=2,n=null===s.Um||void 0===s.Um||null===(l=s.Um.children[0])||void 0===l||null===(u=l.children[0])||void 0===u||null===(d=u.children[0])||void 0===d||null===(h=d.children)||void 0===h||null===(f=h.namedItem("channelId"))||void 0===f?void 0:f.innerText){e.next=6;break}throw new a.Zi({code:"RYV-9",message:"The extension was unable to find from which channel to shuffle.",solveHint:"The page will now reload, after which the button should work again. If it doesn't, please report this issue on GitHub!",showTrace:!1,canSavePlaylist:!1});case 6:return p=!1,s.To.id.includes("large-shuffle-button")?(s.To.innerText=" Shuffling...",(0,a.of)(s.To," Still on it...",5e3,(function(){return(" Shuffling..."===s.To.innerText||" Fetching: 100%"===s.To.innerText)&&!p})),"1"!=i.x$.shuffleIgnoreShortsOption?((0,a.of)(s.To," Sorting shorts...",1e4,(function(){return(" Still on it..."===s.To.innerText||" Fetching: 100%"===s.To.innerText)&&!p})),"2"==i.x$.shuffleIgnoreShortsOption?(0,a.of)(s.To," Lots of shorts...",2e4,(function(){return(" Sorting shorts..."===s.To.innerText||" Fetching: 100%"===s.To.innerText)&&!p})):"0"==i.x$.shuffleIgnoreShortsOption&&(0,a.of)(s.To," Not many shorts...",2e4,(function(){return(" Sorting shorts..."===s.To.innerText||" Fetching: 100%"===s.To.innerText)&&!p})),(0,a.of)(s.To," Still sorting...",35e3,(function(){return(" Lots of shorts..."===s.To.innerText||" Not many shorts..."===s.To.innerText||" Fetching: 100%"===s.To.innerText)&&!p}))):(0,a.of)(s.To," Still shuffling...",2e4,(function(){return(" Still on it..."===s.To.innerText||" Fetching: 100%"===s.To.innerText)&&!p}))):(y=0,v=setInterval((0,o.Z)(r.mark((function e(){var n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p||!("100%"==t.innerText||"shuffle"==t.innerText&&y++>=15)){e.next=12;break}return clearInterval(v),e.next=4,(0,a.gw)(400);case 4:if(!p){e.next=6;break}return e.abrupt("return");case 6:(0,a.BO)(t,!1),t.innerText="autorenew",n=0,o=setInterval((function(){p?clearInterval(o):(t.style.transform="rotate(".concat(n,"deg)"),n=(n+5)%360)}),25),e.next=13;break;case 12:p&&clearInterval(v);case 13:case"end":return e.stop()}}),e)}))),150)),e.next=10,(0,c.i)(n,!1,s.To);case 10:p=!0,s.To.id.includes("large-shuffle-button")?s.To.innerText=" Shuffle":((0,a.BO)(t,!1),t.innerText="shuffle"),e.next=47;break;case 14:if(e.prev=14,e.t0=e.catch(2),console.error(e.t0),p=!0,s.Um.id.includes("small-shuffle-button")&&(0,a.BO)(t,!0),w="",null===s.Um||void 0===s.Um||null===(m=s.Um.id)||void 0===m||!m.includes("large-shuffle-button")){e.next=31;break}e.t1=e.t0.name,e.next="RandomYoutubeVideoError"===e.t1?24:"YoutubeAPIError"===e.t1?26:28;break;case 24:return w="Error ".concat(e.t0.code),e.abrupt("break",29);case 26:return w="API Error ".concat(e.t0.code),e.abrupt("break",29);case 28:w="Unknown Error";case 29:e.next=37;break;case 31:e.t2=e.t0.name,e.next="RandomYoutubeVideoError"===e.t2||"YoutubeAPIError"===e.t2?34:36;break;case 34:return w=e.t0.code,e.abrupt("break",37);case 36:w="Unknown Error";case 37:if("Extension context invalidated."!==e.t0.message){e.next=42;break}return p=!0,window.alert("Random YouTube Video:\n\nThe extension's background worker was reloaded. This happens after an extension update, or after you interrupted a shuffle that was started from the popup.\n\nThe page will reload and you can try again."),window.location.reload(),e.abrupt("return");case 42:return null!==s.Um&&void 0!==s.Um&&null!==(g=s.Um.id)&&void 0!==g&&g.includes("large-shuffle-button")?s.To.innerText=" ".concat(w):t.innerText="Unknown Error"==w?"Error":w,e.next=45,(0,a.gw)(10);case 45:return window.alert("Random YouTube Video:\n\nChannel ".concat(n,"\n").concat(w).concat(e.t0.message?"\n"+e.t0.message:"").concat(e.t0.reason?"\n"+e.t0.reason:"").concat(e.t0.solveHint?"\n"+e.t0.solveHint:"").concat(!1!==e.t0.showTrace?"\n\n"+e.t0.stack:"")),e.abrupt("return");case 47:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}(d||h||f)&&window.location.reload(!0),document.addEventListener("yt-navigate-finish",p),t()}catch(x){t(x)}}))},215:(e,t,n)=>{"use strict";var o,r;function a(e,t,n){var a,i,s="",c=!0,l=!0;switch(e){case"channel":a="youtube-random-video-large-shuffle-button-channel",s="margin-left: 14px;",i=[document.getElementById("channel-header").querySelector("#inner-header-container").children.namedItem("buttons")];break;case"video":a="youtube-random-video-large-shuffle-button-video",s="margin-left: 8px;",i=[document.getElementById("above-the-fold").children.namedItem("top-row").children.namedItem("owner")];break;case"short":l=!1,a="youtube-random-video-small-shuffle-button-short",c=!1,i=document.querySelectorAll("ytd-reel-video-renderer ytd-reel-player-overlay-renderer #actions");break;default:return void console.warn("Cannot build button: Unknown page type: ".concat(e))}if("video"==e&&(i[0].style.minWidth="calc(50% + 50px)",i[0].parentElement.children.namedItem("actions").style.minWidth="calc(50% - 62px)"),document.getElementById(a)&&!t)return document.getElementById(a).style.display="none",void console.log("No channelId found: Button should not be visible, hiding it.");if(t){var u,d;if(document.querySelectorAll("#".concat(a)).length>=i.length)return(u="short"===e?document.querySelector("ytd-reel-video-renderer[is-active] ytd-reel-player-overlay-renderer #actions").children.namedItem(a):document.getElementById(a)).style.display="flex",u.children[0].children[0].children[0].children.namedItem("channelId").innerText=null!=t?t:"",o=u,void(r=l?o.children[0].children[0].children[0].children[1].children[0]:o.children[0].children[0].children[0].children[0].children[0]);i=Array.from(i).filter((function(e){return!e.children.namedItem(a)})),"channel"===e||"video"===e?d='\n\t<div id="'.concat(a,'" class="style-scope ytd-c4-tabbed-header-renderer" style="align-items: center; display: flex; flex-direction: row; ').concat(s,'">\n\t\t<ytd-button-renderer class="style-scope ytd-c4-tabbed-header-renderer">\n\t\t</ytd-button-renderer>\n\t</div>'):"short"===e&&(d='\n\t<div id="'.concat(a,'" class="button-container style-scope ytd-reel-player-overlay-renderer" style="').concat(s,'">\n\t\t<ytd-button-renderer class="style-scope ytd-reel-player-overlay-renderer" button-renderer="" button-next="">\n\t\t</ytd-button-renderer>\n\t</div>')),d=(new DOMParser).parseFromString(d,"text/html").body.firstChild,i.forEach((function(e){if(null==e.children.namedItem(a)){var t=d.cloneNode(!0);c?e.appendChild(t):e.prepend(t)}})),new MutationObserver((function(s,c){if(i[i.length-1].children.namedItem(a).children.length>0)return c.disconnect(),void function(e,t,n,a,i,s){var c;c=a?'\n\t\t<button\n\t\t\tclass="yt-spec-button-shape-next yt-spec-button-shape-next--tonal yt-spec-button-shape-next--mono yt-spec-button-shape-next--size-m"\n\t\t\taria-label="Shuffle from this channel">\n\t\t\t\t<span class="material-symbols-outlined" style="width: 24.01px; overflow: hidden;">\n\t\t\t\t\tshuffle\n\t\t\t\t</span>\n\t\t\t\t<div class="cbox yt-spec-button-shape-next--button-text-content">\n\t\t\t\t\t<span id="random-youtube-video-large-shuffle-button-text" class="yt-core-attributed-string yt-core-attributed-string--white-space-no-wrap" role="text">\n\t\t\t\t\t\t&nbsp;Shuffle\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<yt-touch-feedback-shape style="border-radius: inherit;">\n\t\t\t\t\t<div class="yt-spec-touch-feedback-shape yt-spec-touch-feedback-shape--touch-response" aria-hidden="true">\n\t\t\t\t\t\t<div class="yt-spec-touch-feedback-shape__stroke" style></div>\n\t\t\t\t\t\t<div class="yt-spec-touch-feedback-shape__fill" style></div>\n\t\t\t\t\t</div>\n\t\t\t\t</yt-touch-feedback-shape>\n\t\t\t\t<span id="channelId" style="display: none">'.concat(null!=t?t:"","</span>\n\t\t</button>"):'\n\t\t<button\n\t\t\tclass="yt-spec-button-shape-next yt-spec-button-shape-next--tonal yt-spec-button-shape-next--mono yt-spec-button-shape-next--size-l yt-spec-button-shape-next--icon-button"\n\t\t\taria-label="Shuffle from this channel">\n\t\t\t\t<div class="yt-spec-button-shape-next__icon">\n\t\t\t\t\t<span id="random-youtube-video-small-shuffle-button-text" class="material-symbols-outlined" style="width: 100%; height: 100%; overflow: hidden;">\n\t\t\t\t\t\tshuffle\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<yt-touch-feedback-shape style="border-radius: inherit;">\n\t\t\t\t\t<div class="yt-spec-touch-feedback-shape yt-spec-touch-feedback-shape--touch-response" aria-hidden="true">\n\t\t\t\t\t\t<div class="yt-spec-touch-feedback-shape__stroke" style></div>\n\t\t\t\t\t\t<div class="yt-spec-touch-feedback-shape__fill" style></div>\n\t\t\t\t\t</div>\n\t\t\t\t</yt-touch-feedback-shape>\n\t\t\t\t<span id="channelId" style="display: none">'.concat(null!=t?t:"","</span>\n\t\t</button>"),c=(new DOMParser).parseFromString(c,"text/html").body.firstChild;var l,u='\n\t<tp-yt-paper-tooltip fit-to-visible-bounds offset="8" role="tooltip" tabindex="-1">\n\t</tp-yt-paper-tooltip>';(u=(new DOMParser).parseFromString(u,"text/html").body.firstChild).innerText=a?"Shuffle from this channel":"Shuffle channel",i.forEach((function(e){e.children.namedItem(s).children[0].removeChild(e.children.namedItem(s).children[0].children[1])})),i.forEach((function(e){var t=u.cloneNode(!0);e.children.namedItem(s).children[0].appendChild(t)})),i.forEach((function(e){var t=c.cloneNode(!0);e.children.namedItem(s).children[0].children[0].appendChild(t)})),i.forEach((function(e){(o=e.children.namedItem(s)).addEventListener("click",n)})),l="short"===e?document.querySelector("ytd-reel-video-renderer[is-active] ytd-reel-player-overlay-renderer #actions").children.namedItem(s):document.getElementById(s),o=l,r=a?o.children[0].children[0].children[0].children[1].children[0]:o.children[0].children[0].children[0].children[0].children[0]}(e,t,n,l,i,a)})).observe(document,{childList:!0,subtree:!0})}else console.log("Cannot build button: No channelID found.")}function i(){for(var e=0,t=[document.querySelector("ytd-playlist-panel-renderer#playlist.style-scope.ytd-watch-flexy").querySelector("yt-formatted-string.title.style-scope.ytd-playlist-panel-renderer"),document.querySelector("ytd-playlist-panel-renderer#playlist.style-scope.ytd-watch-flexy").querySelector("yt-formatted-string.byline-title.style-scope.ytd-playlist-panel-renderer")];e<t.length;e++){var n=t[e];n&&window.location.href.includes("&list=TL")&&"Untitled List"==n.title?(n.innerText="Random YouTube Video - Playlist",n.title="This playlist is unlisted, temporary and cannot be saved. Until it is removed by YouTube (which will happen automatically), you can revisit it using the link in the URL bar."):n&&(n.innerText=n.title)}}n.d(t,{MA:()=>a,To:()=>r,Um:()=>o,xV:()=>i})},524:(e,t,n)=>{"use strict";n.a(e,(async(e,o)=>{try{n.d(t,{i:()=>u});var r=n(942),a=n(861),i=n(687),s=n(385),c=n(164),l=e([c]);function u(e,t,n){return d.apply(this,arguments)}function d(){return(d=(0,a.Z)(i.mark((function e(t,n,o){var r,a,l,u,d,f,y,v,m,g,x,k,T,I,S,P,O,A,R;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,chrome.runtime.sendMessage({command:"connectionTest"});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("The service worker was stopped and had to be restarted.");case 8:return e.prev=8,d=setInterval((function(){chrome.runtime.sendMessage({command:"connectionTest"})}),25e3),e.next=12,(0,c.e9)();case 12:if(f=e.sent,y=!1,v=c.x$.databaseSharingEnabledOption,m=t?t.replace("UC","UU"):null){e.next=18;break}throw new s.Zi({code:"RYV-1",message:"No channel-ID found.",solveHint:"Please reload the page and try again. Please inform the developer if this keeps happening.",showTrace:!1,canSavePlaylist:!1});case 18:return console.log("Shuffling from playlist/channel: ".concat(m)),e.next=21,C(m);case 21:if(g=e.sent,!(0,s.xb)(g)){e.next=53;break}if(console.log("Uploads playlist for this channel does not exist locally.".concat(v?" Trying to get it from the database...":"")),!v){e.next=30;break}return e.next=27,h(m);case 27:e.t1=e.sent,e.next=31;break;case 30:e.t1={};case 31:if(g=e.t1,!(0,s.xb)(g)){e.next=42;break}return v?console.log("Uploads playlist for this channel does not exist in the database. Fetching it from the YouTube API..."):console.log("Fetching the uploads playlist for this channel from the YouTube API..."),e.next=36,b(m,null,f,o);case 36:k=e.sent,g=k.playlistInfo,f=k.userQuotaRemainingToday,y=!0,e.next=50;break;case 42:if(!(v&&(null!==(x=g.lastUpdatedDBAt)&&void 0!==x?x:new Date(0).toISOString())<(0,s.TR)(new Date,-48).toISOString())){e.next=50;break}return console.log("Uploads playlist for this channel may be outdated in the database. Updating from the YouTube API..."),e.next=46,w(g,m,null,f,o);case 46:T=e.sent,g=T.playlistInfo,f=T.userQuotaRemainingToday,y=!0;case 50:console.log("Uploads playlist for this channel successfully retrieved."),e.next=81;break;case 53:if(!(v&&(null!==(r=g.lastFetchedFromDB)&&void 0!==r?r:new Date(0).toISOString())<(0,s.TR)(new Date,-48).toISOString()||!v&&(null!==(a=g.lastAccessedLocally)&&void 0!==a?a:new Date(0).toISOString())<(0,s.TR)(new Date,-48).toISOString())){e.next=81;break}if(console.log("Local uploads playlist for this channel may be outdated.".concat(v?" Updating from the database...":"")),!v){e.next=61;break}return e.next=58,h(m,g);case 58:e.t2=e.sent,e.next=62;break;case 61:e.t2={};case 62:if(g=e.t2,!(0,s.xb)(g)){e.next=73;break}return console.log("".concat(v?"Uploads playlist for this channel does not exist in the database. ":"Fetching it from the YouTube API...")),e.next=67,b(m,null,f,o);case 67:S=e.sent,g=S.playlistInfo,f=S.userQuotaRemainingToday,y=!0,e.next=81;break;case 73:if(!((null!==(I=g.lastUpdatedDBAt)&&void 0!==I?I:new Date(0).toISOString())<(0,s.TR)(new Date,-48).toISOString())){e.next=81;break}return console.log("Uploads playlist for this channel may be outdated in the database. Updating from the YouTube API..."),e.next=77,w(g,m,null,f,o);case 77:P=e.sent,g=P.playlistInfo,f=P.userQuotaRemainingToday,y=!0;case 81:return e.next=83,(0,c.$I)("userQuotaRemainingToday",Math.max(0,f));case 83:return M(g),g.videos.unknownType=Object.assign({},null!==(l=g.videos.unknownType)&&void 0!==l?l:{},null!==(u=g.newVideos)&&void 0!==u?u:{}),e.next=87,V(g,t,y);case 87:return R=e.sent,O=R.chosenVideos,g=R.playlistInfo,y=R.shouldUpdateDatabase,A=R.encounteredDeletedVideos,e.next=94,p(g,m,y,v,A);case 94:return g=e.sent,e.next=97,$(m,g);case 97:return e.next=99,(0,c.$I)("numShuffledVideosTotal",c.x$.numShuffledVideosTotal+1);case 99:return e.next=101,Z(O,n);case 101:e.next=114;break;case 103:return e.prev=103,e.t3=e.catch(8),e.next=107,(0,c.$I)("userQuotaRemainingToday",Math.max(0,c.x$.userQuotaRemainingToday-1));case 107:if(!(e.t3 instanceof s.Zi&&1==e.t3.canSavePlaylist)){e.next=113;break}return e.next=110,p(g,m,y,v,A);case 110:return g=e.sent,e.next=113,$(m,g);case 113:throw e.t3;case 114:return e.prev=114,clearInterval(d),e.finish(114);case 117:case"end":return e.stop()}}),e,null,[[0,5],[8,103,114,117]])})))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return f=(0,a.Z)(i.mark((function e(t){var n,o,r,a,s,c,l,u,d,h,f,p,y,v,m,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.length>1&&void 0!==b[1]?b[1]:null,o={command:"getPlaylistFromDB",data:t},e.next=4,chrome.runtime.sendMessage(o);case 4:if(!((r=e.sent)&&r.videos&&Array.isArray(r.videos))){e.next=10;break}return console.log("The playlist was found in the database, but it is in an old format (before v1.0.0). Removing..."),e.next=9,chrome.runtime.sendMessage({command:"updateDBPlaylistToV1.0.0",data:{key:t}});case 9:return e.abrupt("return",{});case 10:if(r&&r.videos&&"string"==typeof r.videos&&r.videos[Object.keys(r.videos)[0]].length>10)for(a in console.log("The playlist was found in the database, but it is in an old format (before v1.3.0). Updating format..."),r.videos)r.videos[a]=r.videos[a].substring(0,10);if(r&&r.videos){e.next=13;break}return e.abrupt("return",{});case 13:if(r.lastFetchedFromDB=(new Date).toISOString(),s=JSON.parse(JSON.stringify(r.videos)),n)for(u=U(n),d=new Set(Object.keys(u)),h=new Set(Object.keys(r.videos)),f=Object.keys(r.videos).filter((function(e){return!d.has(e)})),r.videos={},r.videos.unknownType=Object.assign({},n.videos.unknownType,Object.fromEntries(f.map((function(e){return[e,s[e]]})))),r.videos.knownVideos=null!==(c=n.videos.knownVideos)&&void 0!==c?c:{},r.videos.knownShorts=null!==(l=n.videos.knownShorts)&&void 0!==l?l:{},p=0,y=["knownVideos","knownShorts","unknownType"];p<y.length;p++)for(m in v=y[p],n.videos[v])h.has(m)||delete r.videos[v][m];else r.videos={},r.videos.unknownType=s,r.videos.knownVideos={},r.videos.knownShorts={};return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function p(e,t,n,o,r){return y.apply(this,arguments)}function y(){return(y=(0,a.Z)(i.mark((function e(t,n,o,r,a){var c,l;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!r){e.next=8;break}return console.log("Updating the database with the new playlist information..."),t.lastUpdatedDBAt=(new Date).toISOString(),c={},a?(console.log("Some videos need to be deleted from the database. All current videos will be uploaded to the database..."),c=U(t)):(console.log("Uploading new video IDs to the database..."),c=(0,s.xA)(null!==(l=t.newVideos)&&void 0!==l?l:{})>0?t.newVideos:U(t)),e.next=7,v(t,c,n,a);case 7:t.lastFetchedFromDB=(new Date).toISOString();case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t,n,o){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)(i.mark((function e(t,n,o,r){var a,c,l,u;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(24===(l={lastUpdatedDBAt:null!==(a=t.lastUpdatedDBAt)&&void 0!==a?a:(new Date).toISOString(),lastVideoPublishedAt:null!==(c=t.lastVideoPublishedAt)&&void 0!==c?c:new Date(0).toISOString().slice(0,19)+"Z",videos:n}).lastUpdatedDBAt.length){e.next=4;break}return alert("Random YouTube Video:\nPlease send this information to the developer:\n\nlastUpdatedDBAt has the wrong format (got ".concat(l.lastVideoPublishedAt,").\nChannelId: ").concat(o,".")),e.abrupt("return");case 4:if(20===l.lastVideoPublishedAt.length){e.next=7;break}return alert("Random YouTube Video:\nPlease send this information to the developer:\n\nlastVideoPublishedAt has the wrong format (got ".concat(l.lastVideoPublishedAt,").\nChannelId: ").concat(o,".")),e.abrupt("return");case 7:if(!((0,s.xA)(l.videos)<1)){e.next=10;break}return alert("Random YouTube Video:\nPlease send this information to the developer:\n\nNo videos object was found.\nChannelId: ".concat(o,".")),e.abrupt("return");case 10:return u={command:r?"overwritePlaylistInfoInDB":"updatePlaylistInfoInDB",data:{key:o,val:l}},e.next=13,chrome.runtime.sendMessage(u);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t,n,o){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)(i.mark((function e(t,n,o,r){var a,c,l,u,d,h,f,p,y,v,m,b,g,w;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(n);case 2:if(a=e.sent,c=a.APIKey,l=a.isCustomKey,u=a.keyIndex,d=u,l||!(o<=0)){e.next=9;break}throw new s.Zi({code:"RYV-4A",message:"You have exceeded your daily quota allocation for the YouTube API.",solveHint:"You can try again tomorrow or provide a custom API key.",showTrace:!1,canSavePlaylist:!1});case 9:return(h={}).videos={},h.videos.unknownType={},h.videos.knownVideos={},h.videos.knownShorts={},f="",e.next=17,k(t,f,c,l,u,d,o);case 17:if(y=e.sent,p=y.apiResponse,c=y.APIKey,l=y.isCustomKey,u=y.keyIndex,o=y.userQuotaRemainingToday,!((v=p.pageInfo.totalResults)/50>=o+50)||l){e.next=26;break}throw new s.Zi({code:"RYV-4B",message:"The channel you are shuffling from has too many uploads (".concat(v,") for the amount of API requests you can make. To protect the userbase, each user has a limited amount of requests they can make per day."),solveHint:"To shuffle from channels with more uploads, please use a custom API key.",showTrace:!1,canSavePlaylist:!1});case 26:v>=19999&&window.alert("NOTICE: The channel you are shuffling from has a lot of uploads (20,000+). The YouTube API only allows fetching the most recent 20,000 videos, which means that older uploads will not be shuffled from. This limitation is in place no matter if you use a custom API key or not.\n\nThe extension will now fetch all videos it can get from the API."),m=p.items.length,v>50&&(b=Math.round(m/v*100),B(r," Fetching: ".concat(b,"%"),"".concat(b,"%"))),h.videos.unknownType=Object.fromEntries(p.items.map((function(e){return[e.contentDetails.videoId,e.contentDetails.videoPublishedAt.substring(0,10)]}))),h.lastVideoPublishedAt=p.items[0].contentDetails.videoPublishedAt,f=p.nextPageToken?p.nextPageToken:null;case 32:if(null===f){e.next=48;break}return e.next=35,k(t,f,c,l,u,d,o);case 35:g=e.sent,p=g.apiResponse,c=g.APIKey,l=g.isCustomKey,u=g.keyIndex,o=g.userQuotaRemainingToday,m+=p.items.length,w=Math.round(m/v*100),B(r," Fetching: ".concat(w,"%"),"".concat(w,"%")),h.videos.unknownType=Object.assign(h.videos.unknownType,Object.fromEntries(p.items.map((function(e){return[e.contentDetails.videoId,e.contentDetails.videoPublishedAt.substring(0,10)]})))),f=p.nextPageToken?p.nextPageToken:null,e.next=32;break;case 48:return h.lastFetchedFromDB=(new Date).toISOString(),e.abrupt("return",{playlistInfo:h,userQuotaRemainingToday:o});case 50:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t,n,o,r){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)(i.mark((function e(t,n,o,r,a){var c,l,u,d,h,f,p,y,v,m,g,w,x,T,I,S,P,O;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(o);case 2:if(c=e.sent,l=c.APIKey,u=c.isCustomKey,d=c.keyIndex,h=d,u||!(r<=0)){e.next=9;break}throw new s.Zi({code:"RYV-4A",message:"You have exceeded your daily quota allocation for the YouTube API.",solveHint:"You can try again tomorrow or provide a custom API key.",showTrace:!1,canSavePlaylist:!1});case 9:return f=t.lastVideoPublishedAt,e.next=12,k(n,"",l,u,d,h,r);case 12:if(y=e.sent,p=y.apiResponse,l=y.APIKey,u=y.isCustomKey,d=y.keyIndex,r=y.userQuotaRemainingToday,v=p.pageInfo.totalResults,m=(0,s.xA)(U(t)),!((g=v>19999?1e3:Math.max(v-m,0))/50>=r+50)||u){e.next=23;break}throw new s.Zi({code:"RYV-4B",message:"The channel you are shuffling from has too many new uploads (".concat(g,") for the amount of API requests you can make. To protect the userbase, each user has a limited amount of requests they can make per day."),solveHint:"To shuffle from channels with more uploads, please use a custom API key.",showTrace:!1,canSavePlaylist:!1});case 23:if(w=p.items.length,g>50&&(x=Math.min(Math.round(w/g*100),100),B(a," Fetching: ".concat(x,"%"),"".concat(x,"%"))),!(f<p.items[0].contentDetails.videoPublishedAt)){e.next=30;break}console.log("At least one video has been published since the last check, updating video ID's..."),t.lastVideoPublishedAt=p.items[0].contentDetails.videoPublishedAt,e.next=37;break;case 30:if(console.log("No new videos have been published since the last check."),!(v>m)){e.next=36;break}return console.log("There are less videos saved in the database than are uploaded on the channel (".concat(m,"/").concat(v,"), so some videos are missing. Refetching all videos...")),e.next=35,b(n,d,r,a);case 35:return e.abrupt("return",e.sent);case 36:return e.abrupt("return",{playlistInfo:t,userQuotaRemainingToday:r});case 37:T=0,I={};case 39:if(!(f<p.items[T].contentDetails.videoPublishedAt)){e.next=61;break}if(I[p.items[T].contentDetails.videoId]=p.items[T].contentDetails.videoPublishedAt.substring(0,10),!(++T>=p.items.length)){e.next=59;break}if(!p.nextPageToken){e.next=58;break}return e.next=46,k(n,p.nextPageToken,l,u,d,h,r);case 46:S=e.sent,p=S.apiResponse,l=S.APIKey,u=S.isCustomKey,d=S.keyIndex,r=S.userQuotaRemainingToday,w+=p.items.length,P=Math.min(Math.round(w/g*100),100),B(a," Fetching: ".concat(P,"%"),"".concat(P,"%")),T=0,e.next=59;break;case 58:return e.abrupt("break",61);case 59:e.next=39;break;case 61:if(console.log("Found ".concat(Object.keys(I).length," new video(s).")),t.newVideos=I,O=m+(0,s.xA)(t.newVideos),!(v>O)){e.next=69;break}return console.log("There are less videos saved in the database than are uploaded on the channel (".concat(O,"/").concat(v,"), so some videos are missing. Refetching all videos...")),e.next=68,b(n,d,r,a);case 68:return e.abrupt("return",e.sent);case 69:return e.abrupt("return",{playlistInfo:t,userQuotaRemainingToday:r});case 70:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,n,o,r,a,i){return T.apply(this,arguments)}function T(){return(T=(0,a.Z)(i.mark((function e(t,n,o,r,a,l,u){var d,h,f;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d=u;case 1:return e.prev=2,console.log("Getting snippet from YouTube API..."),e.next=6,fetch("https://youtube.googleapis.com/youtube/v3/playlistItems?part=contentDetails&maxResults=50&pageToken=".concat(n,"&playlistId=").concat(t,"&key=").concat(o)).then((function(e){return e.json()})).then((function(e){return h=e}));case 6:if(!h.error){e.next=8;break}throw new s.VU(h.error.code,h.error.message,h.error.errors[0].reason,"",!1,!1);case 8:if(!(--u<=-50)){e.next=11;break}throw new s.Zi({code:"RYV-4B",message:"The channel you are shuffling from has too many uploads for the amount of API requests you can make. To protect the userbase, each user has a limited amount of requests they can make per day.",solveHint:"To shuffle from channels with more uploads, please use a custom API key.",showTrace:!1,canSavePlaylist:!1});case 11:return e.abrupt("break",43);case 14:return e.prev=14,e.t0=e.catch(2),e.next=18,(0,c.$I)("userQuotaRemainingToday",Math.max(0,Math.min(200,u+1)));case 18:if(!(e.t0 instanceof s.VU&&403===e.t0.code&&"quotaExceeded"===e.t0.reason)){e.next=36;break}if(r){e.next=33;break}return console.log("Quota for this key was exceeded, refreshing API keys and trying again..."),e.next=23,(0,c.$I)("nextAPIKeysCheckTime",Date.now()-100);case 23:return e.next=25,A(a+1);case 25:if(f=e.sent,o=f.APIKey,r=f.isCustomKey,(a=f.keyIndex)!==l){e.next=31;break}throw new s.Zi({code:"RYV-2",message:"All API keys have exceeded the allocated quota.",solveHint:"Please *immediately* inform the developer. You can try again tomorrow or provide a custom API key to immediately resolve this problem.",showTrace:!1,canSavePlaylist:!1});case 31:e.next=34;break;case 33:throw new s.Zi({code:"RYV-5",message:"Your custom API key has reached its daily quota allocation.",solveHint:"This can easily happen if the channels you are shuffling from have a lot of uploads, or if you are using the API key for something else as well. You need to wait until the quota is reset or use a different API key.",showTrace:!1,canSavePlaylist:!1});case 34:e.next=41;break;case 36:if(!(e.t0 instanceof s.VU&&404===e.t0.code&&"playlistNotFound"===e.t0.reason)){e.next=40;break}throw new s.Zi({code:"RYV-6A",message:"This channel has not uploaded any videos.",showTrace:!1,canSavePlaylist:!1});case 40:throw e.t0;case 41:e.next=1;break;case 43:return u=r?d:u,e.abrupt("return",{apiResponse:h,APIKey:o,isCustomKey:r,keyIndex:a,userQuotaRemainingToday:u});case 45:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}function I(e,t){return S.apply(this,arguments)}function S(){return(S=(0,a.Z)(i.mark((function e(t,n){var o,r,a,s;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Math.floor((new Date-new Date(n))/864e5),r=o<=2?0:o<=7?1:o<=60?.5:.2,!(Math.random()>r)){e.next=4;break}return e.abrupt("return",!0);case 4:return e.prev=4,e.next=7,fetch("https://www.youtube.com/oembed?url=http://www.youtube.com/watch?v=".concat(t,"&format=json"),{method:"HEAD"});case 7:if(401!==(s=e.sent).status){e.next=15;break}return e.next=11,fetch("https://img.youtube.com/vi/".concat(t,"/0.jpg"),{method:"HEAD"});case 11:200!==e.sent.status?(console.log("Video doesn't exist: ".concat(t)),a=!1):a=!0,e.next=16;break;case 15:200!==s.status?(console.log("Video doesn't exist: ".concat(t)),a=!1):a=!0;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),console.log("An error was encountered while checking for video existence, so it is assumed the video does not exist: ".concat(t)),a=!1;case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,null,[[4,18]])})))).apply(this,arguments)}function P(e){return O.apply(this,arguments)}function O(){return(O=(0,a.Z)(i.mark((function e(t){var n;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://www.youtube.com/oembed?url=http://www.youtube.com/shorts/".concat(t,"&format=json"),{method:"GET"}).then((function(e){return e.json()})).then((function(e){n=!!e.thumbnail_url.endsWith("hq2.jpg")}));case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,fetch("https://www.youtube.com/shorts/".concat(t)).then((function(e){n=!e.redirected}));case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function A(){return R.apply(this,arguments)}function R(){return R=(0,a.Z)(i.mark((function e(){var t,n,o,r,a,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={command:"getAPIKey",data:{useAPIKeyAtIndex:c.length>0&&void 0!==c[0]?c[0]:null}},e.next=4,chrome.runtime.sendMessage(t);case 4:if(n=e.sent,o=n.APIKey,r=n.isCustomKey,a=n.keyIndex,o){e.next=10;break}throw new s.Zi({code:"RYV-3",message:"There are no API keys available in the database. It may be that they were removed for security reasons.",solveHint:"Please check back later to see if this has been resolved, otherwise contact the developer. You can always use the extension by providing your custom API key via the popup, which is never uploaded to the extension's database.",showTrace:!1,canSavePlaylist:!1});case 10:return e.abrupt("return",{APIKey:o,isCustomKey:r,keyIndex:a});case 11:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function V(e,t,n){return D.apply(this,arguments)}function D(){return(D=(0,a.Z)(i.mark((function e(t,n,o){var r,a,l,u,d,h,f,p,y,v,m,b,g,w,x,k,T,S,O,A,R;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p=null!==(r=null===(a=c.x$.channelSettings[n])||void 0===a?void 0:a.activeOption)&&void 0!==r?r:"allVideosOption",e.t0=p,e.next="allVideosOption"===e.t0?4:"dateOption"===e.t0?6:"videoIdOption"===e.t0?8:"percentageOption"===e.t0?10:12;break;case 4:return y=null,e.abrupt("break",12);case 6:return y=null===(l=c.x$.channelSettings[n])||void 0===l?void 0:l.dateValue,e.abrupt("break",12);case 8:return y=null===(u=c.x$.channelSettings[n])||void 0===u?void 0:u.videoIdValue,e.abrupt("break",12);case 10:return y=null!==(d=null===(h=c.x$.channelSettings[n])||void 0===h?void 0:h.percentageValue)&&void 0!==d?d:100,e.abrupt("break",12);case 12:if(void 0!==y){e.next=14;break}throw new s.Zi({code:"RYV-7",message:"You have set an option to filter the videos that are shuffled (".concat(p,"), but no value for the option is set."),solveHint:"Please set a value for the active shuffle filter option in the popup, e.g. a valid date or video ID.",showTrace:!1,canSavePlaylist:!0});case 14:v=Object.assign({},t.videos.unknownType,null!==(f=t.newVideos)&&void 0!==f?f:{}),m=t.videos.knownVideos,b=t.videos.knownShorts,g="1"==c.x$.shuffleIgnoreShortsOption?Object.assign({},v,m,b):"2"==c.x$.shuffleIgnoreShortsOption?Object.assign({},v,m):Object.assign({},v,b),w=Object.keys(g).sort((function(e,t){return new Date(g[t])-new Date(g[e])})),x=j(g,w,p,y),k=[],S=!1,O=c.x$.shuffleOpenAsPlaylistOption?c.x$.shuffleNumVideosInPlaylist:1,console.log("Choosing ".concat(O," random video(s).")),A=0;case 25:if(!(A<O)){e.next=96;break}if(0!==x.length){e.next=29;break}return console.log("No more videos to choose from (".concat(O-A," videos too few uploaded on channel).")),e.abrupt("break",96);case 29:return T=x[Math.floor(Math.random()*x.length)],e.next=32,I(T,g[T]);case 32:if(e.sent){e.next=49;break}S=!0,o=!0;case 35:if(delete t.videos[E(T,t)][T],x.splice(x.indexOf(T),1),T=x[Math.floor(Math.random()*x.length)],console.log("The chosen video does not exist anymore, so it will be removed from the database. A new random video has been chosen: ".concat(T)),void 0!==T){e.next=46;break}if(0!==k.length){e.next=44;break}throw new s.Zi({code:"RYV-6B",message:"All previously uploaded videos on this channel were deleted (the channel does not have any uploads) or you are ignoring/only shuffling from shorts and the channel only has/has no shorts.",solveHint:"If you are ignoring shorts, disable the option in the popup to shuffle from this channel.",showTrace:!1,canSavePlaylist:!0});case 44:return console.log("No more videos to choose from (".concat(O-A," videos too few uploaded on channel).")),e.abrupt("break",96);case 46:return e.next=48,I(T,g[T]);case 48:if(!e.sent){e.next=35;break}case 49:if("1"==c.x$.shuffleIgnoreShortsOption){e.next=91;break}if(void 0===t.videos.unknownType[T]){e.next=87;break}return e.next=53,P(T);case 53:if((R=e.sent)||"2"!=c.x$.shuffleIgnoreShortsOption){e.next=61;break}t.videos.knownVideos[T]=t.videos.unknownType[T],delete t.videos.unknownType[T],k.push(T),x.splice(x.indexOf(T),1),e.next=85;break;case 61:if(!R||"2"!=c.x$.shuffleIgnoreShortsOption){e.next=69;break}console.log("A chosen video was a short, but shorts are ignored. Choosing a new random video."),t.videos.knownShorts[T]=t.videos.unknownType[T],delete t.videos.unknownType[T],x.splice(x.indexOf(T),1),A--,e.next=85;break;case 69:if(!R||"0"!=c.x$.shuffleIgnoreShortsOption){e.next=76;break}t.videos.knownShorts[T]=t.videos.unknownType[T],delete t.videos.unknownType[T],k.push(T),x.splice(x.indexOf(T),1),e.next=85;break;case 76:if(R||"0"!=c.x$.shuffleIgnoreShortsOption){e.next=84;break}console.log("A chosen video was not a short, but only shorts should be shuffled. Choosing a new random video."),t.videos.knownVideos[T]=t.videos.unknownType[T],delete t.videos.unknownType[T],x.splice(x.indexOf(T),1),A--,e.next=85;break;case 84:throw new s.Zi({code:"RYV-11B",message:"An unknown error occurred while testing if the video ".concat(T," should be included in the shuffle."),solveHint:"Please contact the developer, as this should not happen.",showTrace:!1,canSavePlaylist:!1});case 85:e.next=89;break;case 87:k.push(T),x.splice(x.indexOf(T),1);case 89:e.next=93;break;case 91:k.push(T),x.splice(x.indexOf(T),1);case 93:A++,e.next=25;break;case 96:if(0!==k.length){e.next=98;break}throw new s.Zi({code:"RYV-6B",message:"All previously uploaded videos on this channel were deleted (the channel does not have any uploads) or you are ignoring/only shuffling from shorts and the channel only has/has no shorts.",solveHint:"If you are ignoring shorts, disable the option in the popup to shuffle from this channel.",showTrace:!1,canSavePlaylist:!0});case 98:return console.log("".concat(k.length," random video").concat(k.length>1?"s have":" has"," been chosen: [").concat(k,"]")),e.abrupt("return",{chosenVideos:k,playlistInfo:t,shouldUpdateDatabase:o,encounteredDeletedVideos:S});case 100:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){if(t.videos.unknownType[e])return"unknownType";if(t.videos.knownVideos[e])return"knownVideos";if(t.videos.knownShorts[e])return"knownShorts";throw new s.Zi({code:"RYV-11A",message:"The video that was tested does not exist in the local playlist ".concat(e,", so it's type could not be determined."),solveHint:"Please contact the developer, as this should not happen.",showTrace:!1,canSavePlaylist:!1})}function j(e,t,n,o){var r;switch(n){case"allVideosOption":r=t;break;case"dateOption":if(0===(r=t.filter((function(t){return new Date(e[t])>=new Date(o)}))).length)throw new s.Zi({code:"RYV-8A",message:"There are no videos that were released after the specified date (".concat(o,")."),solveHint:"Please change the date or use a different shuffle filter option.",showTrace:!1,canSavePlaylist:!0});break;case"videoIdOption":var a=t.indexOf(o);if(-1===a)throw new s.Zi({code:"RYV-8B",message:"The video ID you specified (".concat(o,") does not map to a video uploaded on this channel."),solveHint:"Please fix the video ID or use a different shuffle filter option.",showTrace:!1,canSavePlaylist:!0});if(0===(r=t.slice(0,a)).length)throw new s.Zi({code:"RYV-8C",message:"There are no videos that were released after the specified video ID (".concat(o,"), or the newest video has not yet been added to the database."),solveHint:"The extension updates playlists every 48 hours, so please wait for an update, change the video ID used in the filer or use a different filter option.",showTrace:!1,canSavePlaylist:!0});break;case"percentageOption":if(o<1||o>100)throw new s.Zi({code:"RYV-8D",message:"The percentage you specified (".concat(o,"%) should be between 1 and 100. Normally, you should not be able to set such a value."),solveHint:"Please fix the percentage in the popup.",showTrace:!1,canSavePlaylist:!0});r=t.slice(0,Math.max(1,Math.ceil(t.length*(o/100))))}return r}function Z(e,t){return _.apply(this,arguments)}function _(){return(_=(0,a.Z)(i.mark((function e(t,n){var o,r,a,l,u,d,h,f,p,y,v,m,b,g,w,x,k,T;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.x$.shuffleOpenAsPlaylistOption&&t.length>1?(a=t.join(","),r="https://www.youtube.com/watch_videos?video_ids=".concat(a)):r="https://www.youtube.com/watch?v=".concat(t[0]),e.next=3,chrome.runtime.sendMessage({command:"getAllYouTubeTabs"});case 3:if(e.t1=o=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==o;case 7:if(!e.t0){e.next=11;break}e.t2=o,e.next=12;break;case 11:e.t2=[];case 12:if(l=e.t2,u=l.find((function(e){return e.id===c.x$.shuffleTabId})),!c.x$.shuffleOpenInNewTabOption||n){e.next=33;break}if("video"===(d=(0,s.Vb)(window.location.href))?(p=null===(h=document.querySelector("ytd-player#ytd-player"))||void 0===h||null===(f=h.children[0])||void 0===f?void 0:f.children[0])&&p.classList.contains("playing-mode")&&!p.classList.contains("unstarted-mode")&&p.children[0].click():"channel"===d?((g=null===(y=document.querySelector("ytd-player#player"))||void 0===y||null===(v=y.children[0])||void 0===v?void 0:v.children[0])&&g.classList.contains("playing-mode")&&!g.classList.contains("unstarted-mode")&&g.children[0].click(),(w=null===(m=document.querySelector("ytd-player#ytd-player"))||void 0===m||null===(b=m.children[0])||void 0===b?void 0:b.children[0])&&w.classList.contains("playing-mode")&&!w.classList.contains("unstarted-mode")&&w.children[0].click()):"short"===d?(T=null===(x=document.querySelector("ytd-player#player"))||void 0===x||null===(k=x.children[0])||void 0===k?void 0:k.children[0])&&T.classList.contains("playing-mode")&&!T.classList.contains("unstarted-mode")&&T.children[0].click():console.log("The current page type (".concat(d,") is not supported when checking if a video player should be paused.")),!c.x$.shuffleReUseNewTabOption||!u){e.next=23;break}return Y(),e.next=21,chrome.runtime.sendMessage({command:"openVideoInTabWithId",data:{tabId:c.x$.shuffleTabId,videoUrl:r}});case 21:e.next=31;break;case 23:return window.open(r,"_blank").focus(),e.t3=c.$I,e.next=27,chrome.runtime.sendMessage({command:"getCurrentTabId"});case 27:return e.t4=e.sent,e.next=30,(0,e.t3)("shuffleTabId",e.t4);case 30:Y();case 31:e.next=42;break;case 33:if(!n){e.next=40;break}return e.t5=c.$I,e.next=37,chrome.runtime.sendMessage({command:"getCurrentTabId"});case 37:return e.t6=e.sent,e.next=40,(0,e.t5)("shuffleTabId",e.t6);case 40:Y(),window.location.assign(r);case 42:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return L.apply(this,arguments)}function L(){return(L=(0,a.Z)(i.mark((function e(){var t;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(3!==(t=new Date).getMonth()||1!==t.getDate()||c.x$.wasLastRickRolledInYear===String(t.getFullYear())){e.next=5;break}return e.next=4,(0,c.$I)("wasLastRickRolledInYear",String(t.getFullYear()));case 4:window.open("https://www.youtube.com/watch?v=dQw4w9WgXcQ","_blank").focus();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return Object.assign({},e.videos.knownVideos,e.videos.knownShorts,e.videos.unknownType)}function M(e){var t;if(!(e.lastVideoPublishedAt&&e.lastFetchedFromDB&&e.videos&&e.videos.knownVideos&&e.videos.knownShorts&&e.videos.unknownType))throw new s.Zi({code:"RYV-10",message:"The playlistInfo object is missing one or more required keys (Got: ".concat(Object.keys(e),", videos key: ").concat(null!==(t=Object.keys(e.videos))&&void 0!==t?t:"No keys",")."),solveHint:"Please try again and inform the developer if the error is not resolved.",showTrace:!1,canSavePlaylist:!1});e.newVideos||(e.newVideos={})}function B(e,t,n){e.id.includes("large-shuffle-button")||"fetchPercentageNoticeShufflingPage"==e.id?e.innerText=t:(["shuffle","close"].includes(n)?(0,s.BO)(e,!1):(0,s.BO)(e,!0),e.innerText=n)}function C(e){return F.apply(this,arguments)}function F(){return F=(0,a.Z)(i.mark((function e(t){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.local.get([t]).then(function(){var e=(0,a.Z)(i.mark((function e(n){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n[t]){e.next=6;break}if(void 0!==n[t].videos){e.next=5;break}return e.next=4,chrome.storage.local.remove([t]);case 4:case 6:return e.abrupt("return",{});case 5:return e.abrupt("return",n[t]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function $(e,t){return N.apply(this,arguments)}function N(){return(N=(0,a.Z)(i.mark((function e(t,n){var o,a,s,c;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Saving playlist to local storage..."),c={lastAccessedLocally:(new Date).toISOString(),lastFetchedFromDB:null!==(o=n.lastFetchedFromDB)&&void 0!==o?o:new Date(0).toISOString(),lastVideoPublishedAt:null!==(a=n.lastVideoPublishedAt)&&void 0!==a?a:new Date(0).toISOString().slice(0,19)+"Z",videos:null!==(s=n.videos)&&void 0!==s?s:{}},e.next=4,chrome.storage.local.set((0,r.Z)({},t,c));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c=(l.then?(await l)():l)[0],o()}catch(H){o(H)}}))},385:(e,t,n)=>{"use strict";n.d(t,{Zi:()=>k,VU:()=>T,TR:()=>x,gw:()=>b,xA:()=>w,Vb:()=>y,xb:()=>g,of:()=>v,BO:()=>m});var o=n(142);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,o.Z)(r.key),r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}var l=n(2);function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function d(e,t,n){return d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&s(r,n.prototype),r},d.apply(null,arguments)}function h(e){var t="function"==typeof Map?new Map:void 0;return h=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return d(e,arguments,u(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),s(o,e)},h(e)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===(0,l.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}var p=console.log;function y(e){var t,n,o;if(!e)return null;var r=e.split("/");return null!==(t=r[2])&&void 0!==t&&t.includes("youtube")?null!==(n=r[3])&&void 0!==n&&n.startsWith("watch?v=")?"video":null!==(o=r[3])&&void 0!==o&&o.startsWith("shorts")?"short":"channel":null}function v(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0};b(n).then((function(){o()&&(e.innerText=t)}))}function m(e,t){e.style.fontSize=t?"12px":"",e.style.position=t?"absolute":"",e.style.top=t?"50%":"",e.style.left=t?"50%":"",e.style.transform=t?"translate(-50%, -50%)":"",e.style.alignItems=t?"center":"",e.style.justifyContent=t?"center":"",e.style.display=t?"flex":"",t?e.classList.remove("material-symbols-outlined"):e.classList.add("material-symbols-outlined")}function b(e){return new Promise((function(t){return setTimeout(t,e)}))}function g(e){return 0===Object.keys(e).length}function w(e){return Object.keys(null!=e?e:{}).length}function x(e,t){return new Date(e.getTime()+36e5*t)}console.log=function(){"[random-youtube-video]:"!==arguments[0]&&Array.prototype.unshift.call(arguments,"[random-youtube-video]:"),p.apply(this,arguments)};var k=function(e){c(n,e);var t=f(n);function n(e){var o,r=e.code,a=void 0===r?"RYV-0":r,s=e.message,c=void 0===s?"":s,l=e.solveHint,u=void 0===l?"":l,d=e.showTrace,h=void 0===d||d,f=e.canSavePlaylist,p=void 0!==f&&f;return i(this,n),(o=t.call(this,c)).code=a,o.message=c,o.solveHint=u,o.showTrace=h,o.canSavePlaylist=p,o.name="RandomYoutubeVideoError",o}return a(n)}(h(Error)),T=function(e){c(n,e);var t=f(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YAPI-0",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return i(this,n),(e=t.call(this,r)).code=o,e.message=r,e.reason=a,e.solveHint=s,e.showTrace=c,e.canSavePlaylist=l,e.name="YoutubeAPIError",e}return a(n)}(k)}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return r[e](n,n.exports,i),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=e=>{e&&!e.d&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},i.a=(r,a,i)=>{var s;i&&((s=[]).d=1);var c,l,u,d=new Set,h=r.exports,f=new Promise(((e,t)=>{u=t,l=e}));f[t]=h,f[e]=e=>(s&&e(s),d.forEach(e),f.catch((e=>{}))),r.exports=f,a((r=>{var a;c=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var a=[];a.d=0,r.then((e=>{i[t]=e,o(a)}),(e=>{i[n]=e,o(a)}));var i={};return i[e]=e=>e(a),i}}var s={};return s[e]=e=>{},s[t]=r,s})))(r);var i=()=>c.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(a=()=>t(i)).r=0;var n=e=>e!==s&&!d.has(e)&&(d.add(e),e&&!e.d&&(a.r++,e.push(a)));c.map((t=>t[e](n)))}));return a.r?l:i()}),(e=>(e?u(f[n]=e):l(h),o(s)))),s&&(s.d=0)},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(439)})();